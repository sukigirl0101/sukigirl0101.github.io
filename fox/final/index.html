<!doctype html>
<html lang="en" class="sg-root">
<head>
  <meta charset="utf-8">
  <title>fox//final</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600;700&family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <link href="../../fox/style.css" rel="stylesheet">
</head>
<body class="sg-body">
  <main class="sg-frame">
    <div class="sg-topbar">
      <div class="sg-dot"></div><div class="sg-dot"></div><div class="sg-dot"></div>
      <div class="sg-title">trace:03 · the last door</div>
    </div>

    <section class="sg-panel">
      <h1 class="sg-h1">the last <span class="sg-ink">door</span></h1>
      <div class="sg-payload">
        <p class="sg-kicker">[fox] 🦊</p>
        <p class="sg-micro">You’ve done well.</p>
        <p class="sg-micro">But the last door is locked.</p>
        <p class="sg-micro">The key is not hidden here.</p>
        <p class="sg-micro">You must ask for it.</p>
      </div>

      <div class="sg-row">
        <input class="sg-input" id="pass" type="password" placeholder="enter passphrase">
        <button class="sg-btn" id="go">unlock</button>
      </div>
      <br>
      <p class="sg-micro sg-faint">hint: you won’t find it on this site. you have to request it.</p>
      <p class="sg-micro sg-hide" id="ok" style="color:#7dffa7">[ok] unlocked. redirecting…</p>
      <p class="sg-micro sg-hide" id="err" style="color:#ff6b8a">[error] wrong passphrase.</p>
    </section>

    <footer class="sg-footer">
      <span>好きgirl ✮⋆˙</span><span>auth: required</span>
    </footer>
  </main>

<script>
  // === Paste your generated SHA-256 hex and Base64 destination here ===
  const HASH = "d8ef3712dddfe94dd295f5ca5ccd2afe807a222ced4416d860a4ac3f6a183ac2";   // find out
  const DEST_B64 = "aHR0cHM6Ly95b3VhcmVtaW5lLnV3dS5haS8 ";    // goal

  const $ = s => document.querySelector(s);
  const ok = $("#ok"), err = $("#err"), input = $("#pass"), btn = $("#go");

  async function sha256(s) {
    const buf = await crypto.subtle.digest(
      "SHA-256",
      new TextEncoder().encode(s)
    );
    return [...new Uint8Array(buf)]
      .map(b => b.toString(16).padStart(2,"0"))
      .join("");
  }

  async function check(){
    err.classList.add("sg-hide");
    ok.classList.add("sg-hide");

    const val = (input.value || "").trim();
    if(!val) return;

    const hash = await sha256(val);
    if(hash === HASH){
      ok.classList.remove("sg-hide");
      setTimeout(() => {
        const url = decodeURIComponent(escape(atob(DEST_B64)));
        location.href = url;
      }, 700);
    } else {
      err.classList.remove("sg-hide");
      input.focus();
      input.select();
    }
  }

  btn.addEventListener("click", check);
  input.addEventListener("keydown", e => {
    if(e.key === "Enter") check();
  });
</script>
</body>
</html>
